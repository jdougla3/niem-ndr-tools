#!/usr/bin/env bash

NDR_TOOLS_ROOT_DIR=$(cd "$(dirname "$0")"/../..; pwd)
. "$NDR_TOOLS_ROOT_DIR"/lib/fn_test.bash

THIS_TEST_FILENAME="$0"

cd "$(dirname "$0")"

while read -r -d $'\n' XSD; do
    case "$XSD" in
        niem/appinfo/3.0/appinfo.xsd ) true;;
        niem/structures/3.0/structures.xsd ) true;;
        niem/conformanceTargets/3.0/conformanceTargets.xsd ) true;;
        niem/localTerminology/3.0/localTerminology.xsd ) true ;;
        niem/niem-core/3.0/niem-core.xsd )
            test_set_stdout <<EOF
EOF

            test_run "$NDR_TOOLS_ROOT_DIR"/bin/get-test-report -r ref -c xml-catalog.xml "$XSD"
            ;;
        * ) test_fail "No test for XSD \"$XSD\"" ;;
    esac
done < <(find niem -type f -name '*.xsd') | sed -e "/^[^#]/s!^!$THIS_TEST_FILENAME:!"







